import re
import os

text_path = r'C:\Users\Iris\Desktop\delete'
# 拿到文件夹下面的所有文件
text_list = os.listdir(text_path)
for path in text_list:
    with open(text_path + '\\' + path,'r',encoding='UTF-8') as f:
        result = f.read()
        # 使用正则表达式去匹配标点符号
        result = re.sub("[\s+\.\!\/_,$%^*(+\"\')]+|[+——()?【】“”！，。？、~@#￥%……&*（）]+", "",result)
        print(result)
        # result1 = demo(result)
        with open(text_path+ '\\' +path,'w',encoding='UTF-8') as w:
            w.write(str(result))
y_true = np.array([0,1,2,-2,-2,2,2 ,-2,1,-2,-1,-2,-1,-2,2,2,-2,-1,2,2 ,2,2,2,2,2,2,-2,-2,2,1,-2,-1,-2,1,1,2,2,-2,-2,2,-2,1,0,1,2,1,1,2,-2,1,1,-2,-2,2,-1,2,0,-1,-2,-2,2,2,-2,-1,2,-2,-2,1,1,2,1,-2,0,-1,-1,-2,2,1,2,2,2,-2,2,-2,1,1,2,2,0,0,-1,2,-2,-2,0,1,2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,1,2,2,1,0,-1,2,2,0,-2,-1,-1,1,0,1,1,0,1,0,-2,-2,0,-1,2,0,-2,0,1,2,-2,-1,-1,-1,-2,0,-1,-1,0,2,2,-2,0,2,-2,0,0,0,-1,-1,-2,-2,0,-1,1,1,2,2,2,2,-1,1,1,0,2,2 ,2,-2,1,1,1,-2,1,2,1,-2,-2,1,-2,1,0,1,0,2,0,-1,1,-2,1,1,-1,2,2,2,1,1,1,-2,-2,-2,-2,2,0,-2,2,1,-1,-2,2,-2,2,2,-1,1,0,1,2,2,0,0,1,2,2,0,1,-1,0,-2,-2,-2,2,-2,-2,2,-2,0,2,2,0,2,0,1,-1,-2,-1,-2,-2,-2,2,0,-2,0,2,2,0,2,2,2,2,2,0,2,-2,2,1,0,0,-1,-2,-2,-2,0,-2,-1,-2,-2,-2,-2,-2,-2,-2,1,1,-2,1,2,-2,2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,2,2,-2,-2,-2,-2,-2,-2,-2,-2,2,-2,0,-1,-1,2,0,2,-2,2,2,2,2,2,-2,-2,-2,-2,2,0,2,-1,2,2,2,-2,2,-2,0,1,2,0,-1,1,-2,2,-2,-2,-2,2,2,2,-2,-2,-2,-2,-1,-1,-2,0,0,2,2,2,0,2,2,2,-2,-2,2,2,-2,-2,2,1,-1,2,2,2,-2,2,0,0,0,-1,-2,-2,2,-2,-2,0,2,-2,-2,2,0,-1,-2,2,2,0, 2,-1,-2,-2,-2,-2,-2,1,-2,-2,0,-2,1,-1,2,0,2,-2,-2,-2,-2,-1,0,-2,-2,-2,-2,-2,-2,-2,1,2,-2,-2
])
y_pred = np.array([2,2,2,-2,1,2,2,1,2,0,1,0,1,-2,2,1,0,2,2,2,2,2,2,2,2,2,0,-2,2,-2,-2,-1,-1,1,1,2,2,-2,-2,2,-2,1,1,2,2,1,1,1,-2,1,1,-1,-2,2,0,2,0,0,-1,-1,2,2,-1,1,2,1,-2,0,1,2,0,-1,2,1,1,-1,2,2,2,2,2,2,1,0,1,2,1,2,1,1,2,2,-2,-2,0,2,2,-1,-2,-2,-2,-2,-2,-1,-2,-2,0,-2,-2,2,2,2,2,0,1,2,2,2,-2,1,2,1,0,1,2,1,1,-2,-2,-2,-1,-2,1,0,-1,-2,2,-1,-2,-1,1,-1,-1,-1,-1,-1,0,2,2,-1,0,2,-1,1,1,1,-2,0,-1,-1,-2,2,2,2,2,2,2,2,-1,-2,1,2,1,2,1,-1,0,0,2,1,2,2,1,-2,-2,2,-1,2,1,1,2,2,-1,-2,2,-1,-2,-2,-2,2,2,2,0,0,0,-2,-2,1,-1,2,2,-2,-2,2,-1,-1,2,-2,2,2,1,2,1,2,2,2,2,1,0,2,2,-1,2,2,0,-1,-1,-1,2,-1,-2,-2,-2,-1,1,1,0,-1,2,1,-1,-2,0,-2,-2,-2,2,-1,-2,-2,2,2,-2,2,2,2,2,1,-1,1,0,2,1,0,1,-1,1,-1,-1,-1,-1,-1,-2,1,-1,-1,-1,-1,-1,2,2,-2,2,1,-1,0,-1,-1,-2,-1,-2,-2,0,0,-2,-1,2,2,-1,-1,-1,-1,-1,-2,-1,-1,2,-1,1,0,0,2,2,-1,-2,2,2,2,2,2,0,1,2,-2,-2,0,1,0,2,2,2,0,2,-2,0,0,2,0,-1,1,1,2,-2,-2,-2,2,2,1,-1,-1,-1,-2,-2,0,-2,2,-1,2,2,2,1,0,-1,2,0,0,2,2,-2,-2,2,1,2,1,2,1,-1,2,0,-1,-1,1,-1,-1,2,-1,0,1,2,-2,-1,1,1,-1,-1,1,1,-1,1,0,-1,-1,1,-2,-2,1,-1,-1,0,-1,2,1,1,-2,0,-2,-2,-2,0,1,2,-1,-1,-1,0,-1,-2,-2,2,2,-2,1
])
bb=y_true-y_pred
print(list(bb))
print(bb.count(0))

#merge
import pandas as pd
pd.set_option('display.width', None)
from pandas import DataFrame, Series


data1 = pd.read_csv('F:/chat_history/merge1_copy2.csv',dtype={'question_id':float,'answer_text':str,'type':str,'session_id':str,'question_text':str,'coefficient':float,'classify':str,'score':float})
data1.columns=['question_id','answer_text','type','session_id','question_text','coefficient','classify','score']
data1 = DataFrame(data1)
data2 = pd.read_csv('F:/chat_history/1111.csv',dtype={'question_id': float,'counts':float})
data2.columns=['question_id','counts']
data2 = DataFrame(data2)
data=pd.merge(data2,data1,left_on='question_id',right_on='question_id',how='left')

print(data.head())
data.to_csv('F:/chat_history/111111.csv')
